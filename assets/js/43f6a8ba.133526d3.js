"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[49],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return c}});var l=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=l.createContext({}),s=function(e){var t=l.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return l.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},m=l.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,d=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=s(n),c=i,h=m["".concat(d,".").concat(c)]||m[c]||u[c]||r;return n?l.createElement(h,a(a({ref:t},p),{},{components:n})):l.createElement(h,a({ref:t},p))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=m;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:i,a[1]=o;for(var s=2;s<r;s++)a[s]=n[s];return l.createElement.apply(null,a)}return l.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8215:function(e,t,n){var l=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,i=e.className;return l.createElement("div",{role:"tabpanel",hidden:n,className:i},t)}},5064:function(e,t,n){n.d(t,{Z:function(){return u}});var l=n(7294),i=n(9443);var r=function(){var e=(0,l.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},a=n(6010),o="tabItem_1uMI",d="tabItemActive_2DSg";var s=37,p=39;var u=function(e){var t=e.lazy,n=e.block,i=e.defaultValue,u=e.values,m=e.groupId,c=e.className,h=r(),f=h.tabGroupChoices,k=h.setTabGroupChoices,b=(0,l.useState)(i),g=b[0],v=b[1],y=l.Children.toArray(e.children),M=[];if(null!=m){var E=f[m];null!=E&&E!==g&&u.some((function(e){return e.value===E}))&&v(E)}var N=function(e){var t=e.currentTarget,n=M.indexOf(t),l=u[n].value;v(l),null!=m&&(k(m,l),setTimeout((function(){var e,n,l,i,r,a,o,s;(e=t.getBoundingClientRect(),n=e.top,l=e.left,i=e.bottom,r=e.right,a=window,o=a.innerHeight,s=a.innerWidth,n>=0&&r<=s&&i<=o&&l>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(d),setTimeout((function(){return t.classList.remove(d)}),2e3))}),150))},w=function(e){var t,n;switch(e.keyCode){case p:var l=M.indexOf(e.target)+1;n=M[l]||M[0];break;case s:var i=M.indexOf(e.target)-1;n=M[i]||M[M.length-1]}null==(t=n)||t.focus()};return l.createElement("div",{className:"tabs-container"},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},c)},u.map((function(e){var t=e.value,n=e.label;return l.createElement("li",{role:"tab",tabIndex:g===t?0:-1,"aria-selected":g===t,className:(0,a.Z)("tabs__item",o,{"tabs__item--active":g===t}),key:t,ref:function(e){return M.push(e)},onKeyDown:w,onFocus:N,onClick:N},n)}))),t?(0,l.cloneElement)(y.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):l.createElement("div",{className:"margin-vert--md"},y.map((function(e,t){return(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))}},9443:function(e,t,n){var l=(0,n(7294).createContext)(void 0);t.Z=l},897:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return zt},default:function(){return qt},frontMatter:function(){return Ct},metadata:function(){return Ot},toc:function(){return St}});var l,i,r,a,o,d,s,p,u,m,c,h,f,k=n(7462),b=n(3366),g=n(7294),v=n(3905),y=n(5064),M=n(8215),E=["title","titleId"];function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var x,_,C,z,O,S,A,q,W,R,P,j,T,F,D,I,B,H,G,Z,V,L=function(e){var t=e.title,n=e.titleId,k=w(e,E);return g.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:422,height:152,viewBox:"-0.5 -0.5 422 152","aria-labelledby":n},k),t?g.createElement("title",{id:n},t):null,l||(l=g.createElement("defs",null,g.createElement("style",null,"@import url(https://fonts.googleapis.com/css?family=Roboto);"))),i||(i=g.createElement("path",{d:"M90 50h71.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),r||(r=g.createElement("path",{d:"M167.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),a||(a=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 10h80v80H10z"})),o||(o=g.createElement("text",{x:49.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"A")),d||(d=g.createElement("path",{d:"M250 50h71.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),s||(s=g.createElement("path",{d:"M327.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),p||(p=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 10h80v80h-80z"})),u||(u=g.createElement("text",{x:209.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"B")),m||(m=g.createElement("path",{d:"M370 90v20q0 20-20 20H70q-20 0-20-15.88V98.24",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),c||(c=g.createElement("path",{d:"M50 92.24l4 8-4-2-4 2z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),h||(h=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 10h80v80h-80z"})),f||(f=g.createElement("text",{x:369.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"C")))},X=["title","titleId"];function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Y,J,Q,$,ee,te,ne,le,ie,re,ae,oe,de,se,pe,ue,me,ce=function(e){var t=e.title,n=e.titleId,l=K(e,X);return g.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",width:422,height:282,viewBox:"-0.5 -0.5 422 282","aria-labelledby":n},l),t?g.createElement("title",{id:n},t):null,x||(x=g.createElement("defs",null,g.createElement("style",null,"@import url(https://fonts.googleapis.com/css?family=Roboto);"))),_||(_=g.createElement("path",{d:"M90 110h71.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),C||(C=g.createElement("path",{d:"M167.76 110l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),z||(z=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 70h80v80H10z"})),O||(O=g.createElement("text",{x:49.5,y:123.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"A")),S||(S=g.createElement("path",{d:"M250 110h20q20 0 20-20V70q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),A||(A=g.createElement("path",{d:"M327.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),q||(q=g.createElement("path",{d:"M250 110h20q20 0 20 20v20q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),W||(W=g.createElement("path",{d:"M327.76 170l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),R||(R=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 70h80v80h-80z"})),P||(P=g.createElement("text",{x:209.5,y:123.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"B")),j||(j=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 10h80v80h-80z"})),T||(T=g.createElement("text",{x:369.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"C")),F||(F=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 130h80v80h-80z"})),D||(D=g.createElement("text",{x:369.5,y:183.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"D")),I||(I=g.createElement("path",{d:"M90 230h71.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),B||(B=g.createElement("path",{d:"M167.76 230l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),H||(H=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 190h80v80H10z"})),G||(G=g.createElement("text",{x:49.5,y:243.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"E")),Z||(Z=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 190h80v80h-80z"})),V||(V=g.createElement("text",{x:209.5,y:243.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"F")))},he=["title","titleId"];function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var be,ge,ve,ye,Me,Ee,Ne,we,xe,_e,Ce,ze,Oe,Se,Ae,qe,We,Re,Pe,je,Te,Fe,De,Ie,Be,He=function(e){var t=e.title,n=e.titleId,l=ke(e,he);return g.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",width:422,height:262,viewBox:"-0.5 -0.5 422 262","aria-labelledby":n},l),t?g.createElement("title",{id:n},t):null,Y||(Y=g.createElement("defs",null,g.createElement("style",null,"@import url(https://fonts.googleapis.com/css?family=Roboto);"))),J||(J=g.createElement("path",{d:"M90 130h20q20 0 20-20V70q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Q||(Q=g.createElement("path",{d:"M167.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),$||($=g.createElement("path",{d:"M90 130h20q20 0 20 20v40q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),ee||(ee=g.createElement("path",{d:"M167.76 210l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),te||(te=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 90h80v80H10z"})),ne||(ne=g.createElement("text",{x:49.5,y:143.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"A")),le||(le=g.createElement("path",{d:"M250 50h20q20 0 20 20v20q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),ie||(ie=g.createElement("path",{d:"M327.76 110l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),re||(re=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 10h80v80h-80z"})),ae||(ae=g.createElement("text",{x:209.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"B")),oe||(oe=g.createElement("path",{d:"M250 210h20q20 0 20-20v-20q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),de||(de=g.createElement("path",{d:"M327.76 150l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),se||(se=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 170h80v80h-80z"})),pe||(pe=g.createElement("text",{x:209.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"C")),ue||(ue=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 90h80v80h-80z"})),me||(me=g.createElement("text",{x:369.5,y:143.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"D")))},Ge=["title","titleId"];function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Le,Xe,Ue,Ke,Ye,Je,Qe,$e,et,tt,nt,lt,it,rt,at,ot,dt,st,pt,ut,mt,ct,ht,ft,kt,bt,gt,vt,yt,Mt=function(e){var t=e.title,n=e.titleId,l=Ve(e,Ge);return g.createElement("svg",Ze({xmlns:"http://www.w3.org/2000/svg",width:582,height:262,viewBox:"-0.5 -0.5 582 262","aria-labelledby":n},l),t?g.createElement("title",{id:n},t):null,be||(be=g.createElement("defs",null,g.createElement("style",null,"@import url(https://fonts.googleapis.com/css?family=Roboto);"))),ge||(ge=g.createElement("path",{d:"M90 50h20q20 0 20 20v20q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),ve||(ve=g.createElement("path",{d:"M167.76 110l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),ye||(ye=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 10h80v80H10z"})),Me||(Me=g.createElement("text",{x:49.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"A")),Ee||(Ee=g.createElement("path",{d:"M90 210h20q20 0 20-20v-20q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Ne||(Ne=g.createElement("path",{d:"M167.76 150l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),we||(we=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 170h80v80H10z"})),xe||(xe=g.createElement("text",{x:49.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"B")),_e||(_e=g.createElement("path",{d:"M250 130h231.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Ce||(Ce=g.createElement("path",{d:"M487.76 130l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),ze||(ze=g.createElement("path",{d:"M250 130h20q20 0 20-20V70q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Oe||(Oe=g.createElement("path",{d:"M327.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),Se||(Se=g.createElement("path",{d:"M250 130h20q20 0 20 20v40q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Ae||(Ae=g.createElement("path",{d:"M327.76 210l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),qe||(qe=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 90h80v80h-80z"})),We||(We=g.createElement("text",{x:209.5,y:143.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"C")),Re||(Re=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 10h80v80h-80z"})),Pe||(Pe=g.createElement("text",{x:369.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"D")),je||(je=g.createElement("path",{d:"M410 210h20q20 0 20-20v-20q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Te||(Te=g.createElement("path",{d:"M487.76 150l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),Fe||(Fe=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 170h80v80h-80z"})),De||(De=g.createElement("text",{x:369.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"E")),Ie||(Ie=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M490 90h80v80h-80z"})),Be||(Be=g.createElement("text",{x:529.5,y:143.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"F")))},Et=["title","titleId"];function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,l,i=function(e,t){if(null==e)return{};var n,l,i={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var xt=function(e){var t=e.title,n=e.titleId,l=wt(e,Et);return g.createElement("svg",Nt({xmlns:"http://www.w3.org/2000/svg",width:582,height:262,viewBox:"-0.5 -0.5 582 262","aria-labelledby":n},l),t?g.createElement("title",{id:n},t):null,Le||(Le=g.createElement("defs",null,g.createElement("style",null,"@import url(https://fonts.googleapis.com/css?family=Roboto);"))),Xe||(Xe=g.createElement("path",{d:"M90 50h20q20 0 20 20v20q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Ue||(Ue=g.createElement("path",{d:"M167.76 110l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),Ke||(Ke=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 10h80v80H10z"})),Ye||(Ye=g.createElement("text",{x:49.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"A")),Je||(Je=g.createElement("path",{d:"M90 210h20q20 0 20-20v-20q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),Qe||(Qe=g.createElement("path",{d:"M167.76 150l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),$e||($e=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M10 170h80v80H10z"})),et||(et=g.createElement("text",{x:49.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"B")),tt||(tt=g.createElement("path",{d:"M250 130h20q20 0 20-20V70q0-20 15.88-20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),nt||(nt=g.createElement("path",{d:"M327.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),lt||(lt=g.createElement("path",{d:"M250 130h20q20 0 20 20v40q0 20 15.88 20h15.88",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),it||(it=g.createElement("path",{d:"M327.76 210l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),rt||(rt=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M170 90h80v80h-80z"})),at||(at=g.createElement("text",{x:209.5,y:143.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"C")),ot||(ot=g.createElement("path",{d:"M410 50h71.76",fill:"none",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),dt||(dt=g.createElement("path",{d:"M487.76 50l-8 4 2-4-2-4z",fill:"#b85450",stroke:"#b85450",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),st||(st=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M330 10h80v80h-80z"})),pt||(pt=g.createElement("text",{x:369.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"D")),ut||(ut=g.createElement("path",{d:"M410 210h71.76",fill:"none",stroke:"#9673a6",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"stroke"})),mt||(mt=g.createElement("path",{d:"M487.76 210l-8 4 2-4-2-4z",fill:"#9673a6",stroke:"#9673a6",strokeWidth:2,strokeMiterlimit:10,pointerEvents:"all"})),ct||(ct=g.createElement("path",{fill:"#e1d5e7",stroke:"#9673a6",strokeWidth:2,pointerEvents:"all",d:"M330 170h80v80h-80z"})),ht||(ht=g.createElement("text",{x:369.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"F")),ft||(ft=g.createElement("path",{fill:"#fff2cc",stroke:"#d6b656",strokeWidth:2,pointerEvents:"all",d:"M490 10h80v80h-80z"})),kt||(kt=g.createElement("text",{x:529.5,y:63.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"E")),bt||(bt=g.createElement("path",{fill:"#e1d5e7",stroke:"#9673a6",strokeWidth:2,pointerEvents:"all",d:"M490 170h80v80h-80z"})),gt||(gt=g.createElement("text",{x:529.5,y:223.5,fontFamily:"Roboto",textAnchor:"middle",fontSize:32},"G")),vt||(vt=g.createElement("rect",{x:345,y:160,width:50,height:20,rx:10,ry:10,fill:"#e1d5e7",stroke:"#9673a6",strokeWidth:2,pointerEvents:"all"})),yt||(yt=g.createElement("text",{x:369.5,y:175.5,fontFamily:"Roboto",fontWeight:"bold",textAnchor:"middle",fontSize:16},"AGG")))},_t=["components"],Ct={title:"Sequential",sidebar_position:1},zt="Sequential Pipeline",Ot={unversionedId:"pipelines/sequential",id:"version-0.1/pipelines/sequential",isDocsHomePage:!1,title:"Sequential",description:"The first type of a pipeline is a Sequential Pipeline. The other, more complex one is a Parallel Pipeline, which is in fact just multiple sequential pipelines running in parallel.",source:"@site/versioned_docs/version-0.1/pipelines/sequential.md",sourceDirName:"pipelines",slug:"/pipelines/sequential",permalink:"/magda/docs/pipelines/sequential",editUrl:"https://github.com/NeuroSYS-pl/magda/edit/main/web/versioned_docs/version-0.1/pipelines/sequential.md",tags:[],version:"0.1",sidebarPosition:1,frontMatter:{title:"Sequential",sidebar_position:1},sidebar:"version-0.1/tutorialSidebar",previous:{title:"Stateful Modules",permalink:"/magda/docs/modules/stateful"},next:{title:"Parallel",permalink:"/magda/docs/pipelines/parallel"}},St=[{value:"Overview",id:"overview",children:[]},{value:"Directed Acyclic Graph",id:"directed-acyclic-graph",children:[{value:"Disallowed circular dependencies",id:"disallowed-circular-dependencies",children:[]},{value:"Disallowed disjoint graphs definition",id:"disallowed-disjoint-graphs-definition",children:[]},{value:"Sequential Pipeline flow",id:"sequential-pipeline-flow",children:[]}]},{value:"Technical details",id:"technical-details",children:[]},{value:"Simple case study",id:"simple-case-study",children:[{value:"Creating a pipeline instance",id:"creating-a-pipeline-instance",children:[]},{value:"Running the pipeline",id:"running-the-pipeline",children:[]}]},{value:"Blueprints",id:"blueprints",children:[{value:"A stateless pipeline based only on <code>Module.Runtime</code>",id:"a-stateless-pipeline-based-only-on-moduleruntime",children:[]},{value:"A stateful pipeline based on both <code>Module.Runtime</code> and <code>Module.Aggregate</code>",id:"a-stateful-pipeline-based-on-both-moduleruntime-and-moduleaggregate",children:[]}]}],At={toc:St};function qt(e){var t=e.components,n=(0,b.Z)(e,_t);return(0,v.kt)("wrapper",(0,k.Z)({},At,n,{components:t,mdxType:"MDXLayout"}),(0,v.kt)("h1",{id:"sequential-pipeline"},"Sequential Pipeline"),(0,v.kt)("p",null,"The first type of a pipeline is a ",(0,v.kt)("em",{parentName:"p"},"Sequential Pipeline"),". The other, more complex one is a ",(0,v.kt)("em",{parentName:"p"},"Parallel Pipeline"),", which is in fact just multiple sequential pipelines running in parallel. "),(0,v.kt)("h2",{id:"overview"},"Overview"),(0,v.kt)("p",null,"A ",(0,v.kt)("em",{parentName:"p"},"Pipeline")," is composed of a set of ",(0,v.kt)("em",{parentName:"p"},"Modules"),". It's a manager for creating and controlling the flow throughout ",(0,v.kt)("em",{parentName:"p"},"DAG")," (",(0,v.kt)("em",{parentName:"p"},"Directed Acyclic Graph"),")."),(0,v.kt)("p",null,"Like ",(0,v.kt)("em",{parentName:"p"},"Modules"),", a ",(0,v.kt)("em",{parentName:"p"},"Pipeline")," can be in one of two distinct states:"),(0,v.kt)("ul",null,(0,v.kt)("li",{parentName:"ul"},(0,v.kt)("p",{parentName:"li"},(0,v.kt)("strong",{parentName:"p"},"Builder"),(0,v.kt)("br",null),"\nis responsible for constructing a graph of modules and then sorting it,")),(0,v.kt)("li",{parentName:"ul"},(0,v.kt)("p",{parentName:"li"},(0,v.kt)("strong",{parentName:"p"},"Execution"),(0,v.kt)("br",null),"\nis tasked with the execution of proper modules via ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"process")," methods, which are described in detail ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/stateful#pipeline-modes"},"here"),"."))),(0,v.kt)("p",null,"Additionally, a pipeline may be also closed by running ",(0,v.kt)("inlineCode",{parentName:"p"},"close")," function on the runtime object. Closing a module results in calling ",(0,v.kt)("inlineCode",{parentName:"p"},"teardown")," method for each module. A closed pipeline cannot be rerun. "),(0,v.kt)("h2",{id:"directed-acyclic-graph"},"Directed Acyclic Graph"),(0,v.kt)("p",null,"When invoking ",(0,v.kt)("inlineCode",{parentName:"p"},"Pipeline.build")," a ",(0,v.kt)("em",{parentName:"p"},"Graph"),", consisting of all modules previously added to a sequential pipeline, is built.\nBefore a ",(0,v.kt)("inlineCode",{parentName:"p"},"Module")," is run ",(0,v.kt)("strong",{parentName:"p"},"all of it's dependencies")," have to be completed. In order for the ",(0,v.kt)("inlineCode",{parentName:"p"},"Module")," to be run as soon as possible all ",(0,v.kt)("em",{parentName:"p"},"Modules")," are sorted."),(0,v.kt)("p",null,"MAGDA ",(0,v.kt)("em",{parentName:"p"},"Graph")," employs ",(0,v.kt)("strong",{parentName:"p"},"topological sorting"),". It's a graph ordering algorithm which is viable only when the graph is directed and doesn't have any cycles."),(0,v.kt)("h3",{id:"disallowed-circular-dependencies"},"Disallowed circular dependencies"),(0,v.kt)(L,{className:"diagram",width:"30%",mdxType:"CycleSvg"}),(0,v.kt)("p",null,"Topological sorting orders the modules resulting in the sequence where every module follows its dependent modules. The algorithm prioritizes the execution of ",(0,v.kt)("em",{parentName:"p"},"Modules")," that either have no dependencies or are essential for the next ",(0,v.kt)("inlineCode",{parentName:"p"},"Module")," to be run as soon as possible."),(0,v.kt)("p",null,(0,v.kt)("em",{parentName:"p"},"MAGDA")," works on basis of a ",(0,v.kt)("strong",{parentName:"p"},"single connected graph"),", so bear in mind that the pipeline cannot consist of multiple disjoint subgraphs. All the modules need to be connected."),(0,v.kt)("h3",{id:"disallowed-disjoint-graphs-definition"},"Disallowed disjoint graphs definition"),(0,v.kt)(ce,{className:"diagram",width:"30%",mdxType:"DisjointSvg"}),(0,v.kt)("p",null,"During the pipeline building both disjoint graphs and circular dependencies are checked for, which result in appropriate errors if found."),(0,v.kt)("h3",{id:"sequential-pipeline-flow"},"Sequential Pipeline flow"),(0,v.kt)("p",null,"Once the pipeline is built and modules are in the correct order, it can be run. As the name of the pipeline suggests, the modules are called in a ",(0,v.kt)("strong",{parentName:"p"},"sequence"),"."),(0,v.kt)("p",null,"Given the example below, ",(0,v.kt)("em",{parentName:"p"},"MAGDA")," guarantees that module ",(0,v.kt)("em",{parentName:"p"},"A")," will be run first after which either ",(0,v.kt)("em",{parentName:"p"},"B")," or ",(0,v.kt)("em",{parentName:"p"},"C")," is run and then module ",(0,v.kt)("em",{parentName:"p"},"D")," as the last one. Both  ",(0,v.kt)("em",{parentName:"p"},"A -> B -> C -> D")," and ",(0,v.kt)("em",{parentName:"p"},"A -> C -> B -> D")," are possible run sequences. In this case, it doesn't really matter whether module ",(0,v.kt)("em",{parentName:"p"},"B")," or ",(0,v.kt)("em",{parentName:"p"},"C")," runs first. What's important, modules ",(0,v.kt)("em",{parentName:"p"},"B")," and ",(0,v.kt)("em",{parentName:"p"},"C")," won't run in parallel here (though it could be achieved with the usage of a ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/pipelines/parallel"},"Parallel Pipeline"),")"),(0,v.kt)(He,{className:"diagram",width:"30%",mdxType:"FlowSvg"}),(0,v.kt)("h2",{id:"technical-details"},"Technical details"),(0,v.kt)("p",null,"The schematic creation of a sequential pipeline is as follows:"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"from magda.pipeline import SequentialPipeline\n\n# Building a pipeline\nbuilder = SequentialPipeline().add_module(...)\nruntime = builder.build(context)\n\n# Running the pipeline\nruntime.run(request)\nruntime.process(request)\n")),(0,v.kt)("h2",{id:"simple-case-study"},"Simple case study"),(0,v.kt)("p",null,"Here is presented a very simple example of a pipeline usage. For more complex examples see ",(0,v.kt)("a",{parentName:"p",href:"#blueprints"},"the next section"),". "),(0,v.kt)("h3",{id:"creating-a-pipeline-instance"},"Creating a pipeline instance"),(0,v.kt)("p",null,"In order for the pipeline to be built and run, it must consist of modules. Having implemented ",(0,v.kt)("inlineCode",{parentName:"p"},"Module")," classes, the modules need to be added to the pipeline instance. This can be achieved with the use of a configuration file or manually from code. For in-depth workflow please refer to ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/workflow"},"workflow"),"."),(0,v.kt)(y.Z,{defaultValue:"code",values:[{label:"Code-first",value:"code"},{label:"Config-first",value:"config"}],mdxType:"Tabs"},(0,v.kt)(M.Z,{value:"code",mdxType:"TabItem"},(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"from magda.pipeline import SequentialPipeline\n\nbuilder = SequentialPipeline()\nbuilder.add_module(SomeModule('module_a'))\nbuilder.add_module(SomeOtherModule('module_b').depends_on(builder.get_module('module_a')))\n\nruntime = builder.build(context)\n")),(0,v.kt)("p",null,"To avoid using the ",(0,v.kt)("inlineCode",{parentName:"p"},"builder.get_module")," method, the module can be instantiated outside of the pipeline. This way adding modules, through object references, gets more transparent. The following snippet does exactly the same as the one above."),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"from magda.pipeline import SequentialPipeline\n\nmodule_a = SomeModule('module_a')\nmodule_b = SomeOtherModule('module_b')\n\nbuilder = SequentialPipeline()\nbuilder.add_module(module_a)\nbuilder.add_module(module_b.depends_on(module_b))\n\nruntime = builder.build(context)\n"))),(0,v.kt)(M.Z,{value:"config",mdxType:"TabItem"},(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-yaml"},"modules:\n  - name: module_a\n    type: some-module\n  - name: module_b\n    type: some-other-module\n    depends_on:\n      - module_a\n")),(0,v.kt)("p",null,"The config file is then read, creating a pipeline instance (assuming modules have been registered in the ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleFactory")," either manually or via the ",(0,v.kt)("inlineCode",{parentName:"p"},"@register")," decorator). "),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"runtime = ConfigReader.read(config_file_path, ModuleFactory)\n")),(0,v.kt)("p",null,"It's worth noting that the ",(0,v.kt)("inlineCode",{parentName:"p"},"ConfigReader.read")," method outputs an already built pipeline. It means that first the pipeline is created, modules are added, some additional options and parameters are set, and at the end the ",(0,v.kt)("inlineCode",{parentName:"p"},"pipeline.build")," method is invoked.\nIt's important to know how it works as during pipeline building the ",(0,v.kt)("inlineCode",{parentName:"p"},"bootstrap")," method in every module is called, which is described in detail ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/module"},"here"),"."))),(0,v.kt)("h3",{id:"running-the-pipeline"},"Running the pipeline"),(0,v.kt)("p",null,"The ",(0,v.kt)("em",{parentName:"p"},"Pipeline")," can work in one of two modes: run or process, which are described in detail ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/stateful"},"here"),". In brief, the run mode sequentially calls the ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," method in every ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," from the ",(0,v.kt)("em",{parentName:"p"},"Graph")," (which precedes an aggregation module) and the ",(0,v.kt)("inlineCode",{parentName:"p"},"aggregate")," method from the ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate"),". All ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," following ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate")," are ommited."),(0,v.kt)("p",null,"During the process mode firstly ",(0,v.kt)("inlineCode",{parentName:"p"},"process")," methods from the aggregation modules are called, which return stored data. Then the ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," method from every runtime module (that succeeds the aggregation module) is invoked. All ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," preceding ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate")," are ommited."),(0,v.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,v.kt)("div",{parentName:"div",className:"admonition-heading"},(0,v.kt)("h5",{parentName:"div"},(0,v.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,v.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,v.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Notice")),(0,v.kt)("div",{parentName:"div",className:"admonition-content"},(0,v.kt)("p",{parentName:"div"},"Every invocation of the ",(0,v.kt)("inlineCode",{parentName:"p"},"pipeline.process")," method clears aggregation modules inner state."))),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"pipeline.run(request)  # during both `run` and `process` modes requests can be passed to the pipeline\npipeline.run(request)\npipeline.process()     # aggregation module inner state contains 2 elements\npipeline.run(request)\npipeline.process()     # aggregation module inner state contains only 1 element\n")),(0,v.kt)("h2",{id:"blueprints"},"Blueprints"),(0,v.kt)("p",null,"In the following section, instead of very specific implementations, general blueprints for creating a ",(0,v.kt)("inlineCode",{parentName:"p"},"SequentialPipeline")," are shown. These are working examples with abstracted naming and logic, which can be easily expanded on with concrete details.\nThe examples will be also briefly commented on how they work and what should be an expected outcome of each one."),(0,v.kt)("h3",{id:"a-stateless-pipeline-based-only-on-moduleruntime"},"A stateless pipeline based only on ",(0,v.kt)("inlineCode",{parentName:"h3"},"Module.Runtime")),(0,v.kt)("p",null,"Consider the following pipeline:"),(0,v.kt)(Mt,{className:"diagram",width:"50%",mdxType:"RuntimeSvg"}),(0,v.kt)("p",null,"The code is divided into six distinct sections."),(0,v.kt)("p",null,"1) ",(0,v.kt)("strong",{parentName:"p"},"Class definitions"),(0,v.kt)("br",null),"\nThis is where all classes are defined. Notice that, since the classes are added manually to the pipeline, neither the ",(0,v.kt)("inlineCode",{parentName:"p"},"@register")," decorator nor ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleFactory")," was used."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"from magda.module import Module\nfrom magda.decorators import accept, finalize, expose\nfrom magda.pipeline import SequentialPipeline\n\n@finalize\nclass ModuleA(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module a output'\n\n@finalize\nclass ModuleB(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module b output'\n\n@accept(ModuleA, ModuleB)\n@finalize\nclass ModuleC(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module c output'\n\n@accept(ModuleC)\n@expose()\n@finalize\nclass ModuleD(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return self.parameters['important_parameter']\n\n@accept(ModuleC)\n@finalize\nclass ModuleE(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module e output'\n\n@accept(ModuleC, ModuleE)\n@expose('module_f_expose_name')\n@finalize\nclass ModuleF(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module f output'\n"))),(0,v.kt)("p",null,"2) ",(0,v.kt)("strong",{parentName:"p"},"Module initialization"),(0,v.kt)("br",null),"\nHere every module is initialized and a name is set through the constructor. This name is used for ",(0,v.kt)("inlineCode",{parentName:"p"},"@exposed")," classes that don't have an explicit expose name."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"module_a = ModuleA('module_a')\nmodule_b = ModuleB('module_b')\nmodule_c = ModuleC('module_c')\nmodule_d = ModuleD('module_d')\nmodule_e = ModuleE('module_e')\nmodule_f = ModuleF('module_f')\n"))),(0,v.kt)("p",null,"3) ",(0,v.kt)("strong",{parentName:"p"},"Dependency and parameters definition"),(0,v.kt)("br",null),"\nHere all dependencies and additional module parameters should be configured. Thanks to module initialization in the 2nd step, now ",(0,v.kt)("strong",{parentName:"p"},"it is possible to directly reference modules inside the ",(0,v.kt)("inlineCode",{parentName:"strong"},"depends_on")," function.")),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"module_c.depends_on(module_a).depends_on(module_b)\nmodule_d.depends_on(module_c)\nmodule_e.depends_on(module_c)\nmodule_f.depends_on(module_c).depends_on(module_e)\n\nmodule_d.set_parameters({'important_parameter': 'ModuleD important output'})\n"))),(0,v.kt)("p",null,"4) ",(0,v.kt)("strong",{parentName:"p"},"Adding modules to a pipeline"),(0,v.kt)("br",null),"\nHere every initiated module is added to the pipeline. If the class didn't inherit from either ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate")," an error is raised."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"builder = SequentialPipeline()\nbuilder.add_module(module_a)\nbuilder.add_module(module_b)\nbuilder.add_module(module_c)\nbuilder.add_module(module_d)\nbuilder.add_module(module_e)\nbuilder.add_module(module_f)\n"))),(0,v.kt)("p",null,"5) ",(0,v.kt)("strong",{parentName:"p"},"Pipeline build"),(0,v.kt)("br",null),"\nDuring pipeline ",(0,v.kt)("inlineCode",{parentName:"p"},"build"),", firstly, a Graph is built and validated for cycles and disjoint graphs. If the validation passes then all previously added modules are bootstrapped. If there is any ",(0,v.kt)("inlineCode",{parentName:"p"},"context")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"shared_parameters")," available they can be added as optional pipeline ",(0,v.kt)("inlineCode",{parentName:"p"},"build")," parameters."),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"runtime = builder.build()\n")),(0,v.kt)("p",null,"6) ",(0,v.kt)("strong",{parentName:"p"},"Pipeline running"),(0,v.kt)("br",null),"\nWhen a pipeline is built it is ready to be run. As stated before, there are two ways to execute a pipeline. Here, since there is no ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate")," inside a pipeline only the ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," option is applicable. The ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," can also accept a ",(0,v.kt)("inlineCode",{parentName:"p"},"request")," parameter that could be used throughout the pipeline. Since ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleD")," and ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF")," are exposed their results will be available as the pipeline results after a completed ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," function.",(0,v.kt)("br",null),"\n",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleD"),'\'s result is available under the name it was initialized ("module_d"), but because there was a name passed to ',(0,v.kt)("inlineCode",{parentName:"p"},"@expose")," when defining ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF"),' class it was used instead ("module_f_expose_name"). Also, ',(0,v.kt)("inlineCode",{parentName:"p"},"ModuleD")," makes use of passed module parameters (via ",(0,v.kt)("inlineCode",{parentName:"p"},"self.parameters"),"), which it just returns. All possible parameters and how to properly use them are explained in detail ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/module"},"here"),"."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"result = runtime.run()\nprint(result)  # {'module_f_expose_name': 'module f output', 'module_d': 'ModuleD important output'}\n"))),(0,v.kt)("h3",{id:"a-stateful-pipeline-based-on-both-moduleruntime-and-moduleaggregate"},"A stateful pipeline based on both ",(0,v.kt)("inlineCode",{parentName:"h3"},"Module.Runtime")," and ",(0,v.kt)("inlineCode",{parentName:"h3"},"Module.Aggregate")),(0,v.kt)("p",null,"Below a blueprint for a pipeline that can hold a state in between runs is shown.\nIt has the same structure as the above one. Every step will be described but not as in depth."),(0,v.kt)("p",null,"Consider the following pipeline:"),(0,v.kt)(xt,{className:"diagram",width:"50%",mdxType:"AggregateSvg"}),(0,v.kt)("p",null,"The code is divided into six distinct sections."),(0,v.kt)("p",null,"1) ",(0,v.kt)("strong",{parentName:"p"},"Class definitions"),(0,v.kt)("br",null),"\nAll modules besides is defined as ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime"),", besides ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF")," which acts as ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate"),"."),(0,v.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,v.kt)("div",{parentName:"div",className:"admonition-heading"},(0,v.kt)("h5",{parentName:"div"},(0,v.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,v.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,v.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Notice")),(0,v.kt)("div",{parentName:"div",className:"admonition-content"},(0,v.kt)("p",{parentName:"div"},"The definition of ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleE")," and ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleG")," which have overridden run methods to also include ",(0,v.kt)("inlineCode",{parentName:"p"},"data")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"request")," parameters. It can be done since these two parameters are always passed. Any other can be accessed through ",(0,v.kt)("inlineCode",{parentName:"p"},"args")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"kwargs"),"."))),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"from magda.module import Module\nfrom magda.decorators import accept, finalize, expose\nfrom magda.pipeline import SequentialPipeline\n\n@finalize\nclass ModuleA(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module a output'\n\n@finalize\nclass ModuleB(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module b output'\n\n@accept(ModuleA, ModuleB)\n@finalize\nclass ModuleC(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module c output'\n\n@accept(ModuleC)\n@finalize\nclass ModuleD(Module.Runtime):\n    def run(self, *args, **kwargs):\n        return 'module d output'\n\n@accept(ModuleD)\n@expose()\n@finalize\nclass ModuleE(Module.Runtime):\n    def run(self, request, *args, **kwargs):\n        return request\n\n@accept(ModuleC)\n@finalize\nclass ModuleF(Module.Aggregate):\n    pass\n\n@accept(ModuleF)\n@expose()\n@finalize\nclass ModuleG(Module.Runtime):\n    def run(self, data, *args, **kwargs):\n        return data\n"))),(0,v.kt)("p",null,"2) ",(0,v.kt)("strong",{parentName:"p"},"Module initialization"),(0,v.kt)("br",null),"\nAll modules have their appropriate name set. Even though ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF")," isn't ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," it has the same initialization."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"module_a = ModuleA('module_a')\nmodule_b = ModuleB('module_b')\nmodule_c = ModuleC('module_c')\nmodule_d = ModuleD('module_d')\nmodule_e = ModuleE('module_e')\nmodule_f = ModuleF('module_f')\nmodule_g = ModuleG('module_g')\n"))),(0,v.kt)("p",null,"3) ",(0,v.kt)("strong",{parentName:"p"},"Dependency and parameters definition"),(0,v.kt)("br",null),"\nAs before, in order to create a graph all modules have to be connected."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"module_c.depends_on(module_a).depends_on(module_b)\nmodule_d.depends_on(module_c)\nmodule_e.depends_on(module_d)\nmodule_f.depends_on(module_c)\nmodule_g.depends_on(module_f)    \n"))),(0,v.kt)("p",null,"4) ",(0,v.kt)("strong",{parentName:"p"},"Adding modules to a pipeline"),(0,v.kt)("br",null),"\nHere every initiated module is added to the pipeline. If the class didn't inherit from either ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Runtime")," or ",(0,v.kt)("inlineCode",{parentName:"p"},"Module.Aggregate")," an error is raised."),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"builder = SequentialPipeline()\nbuilder.add_module(module_a)\nbuilder.add_module(module_b)\nbuilder.add_module(module_c)\nbuilder.add_module(module_d)\nbuilder.add_module(module_e)\nbuilder.add_module(module_f)\nbuilder.add_module(module_g)\n"))),(0,v.kt)("p",null,"5) ",(0,v.kt)("strong",{parentName:"p"},"Pipeline build"),(0,v.kt)("br",null),"\nThe ",(0,v.kt)("inlineCode",{parentName:"p"},"context")," parameter is a dictionary that can hold both primitive types or references as it's values."),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"runtime = builder.build(context={'context_1': 'context'})\n")),(0,v.kt)("p",null,"6) ",(0,v.kt)("strong",{parentName:"p"},"Pipeline running"),(0,v.kt)("br",null),"\nThe pipeline is run in two states. Firstly the ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," is used twice to execute two requests. The pipeline has two ending branches. One that has exposed result via ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleE")," and one via ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleG"),". During both passes only the modules marked as yellow blocks have their ",(0,v.kt)("inlineCode",{parentName:"p"},"run")," method executed. The request is also added to the internal state of ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF")," but no further modules are run.",(0,v.kt)("br",null),"\nAfterwards, in order to retrieve and work with stored data, ",(0,v.kt)("inlineCode",{parentName:"p"},"process")," mode is used. It executes ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleG")," marked as a purple block after getting the collected results from ",(0,v.kt)("inlineCode",{parentName:"p"},"ModuleF"),". The result is a ",(0,v.kt)("inlineCode",{parentName:"p"},"ResultSet")," object containing all previously stored data, about which can be read more ",(0,v.kt)("a",{parentName:"p",href:"/magda/docs/modules/module"},"here"),"."),(0,v.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,v.kt)("div",{parentName:"div",className:"admonition-heading"},(0,v.kt)("h5",{parentName:"div"},(0,v.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,v.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,v.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Remember")),(0,v.kt)("div",{parentName:"div",className:"admonition-content"},(0,v.kt)("p",{parentName:"div"},"During ",(0,v.kt)("inlineCode",{parentName:"p"},"process")," mode the other branch wasn't executed."))),(0,v.kt)("details",null,(0,v.kt)("summary",null,"See code snippet"),(0,v.kt)("pre",null,(0,v.kt)("code",{parentName:"pre",className:"language-python"},"result_run_1 = runtime.run('request_1')\nresult_run_2 = runtime.run('request_2')\nresult_process = runtime.process()\nprint(result_run_1)    # {'module_e': 'request_1'}\nprint(result_run_2)    # {'module_e': 'request_2'}\nprint(result_process)  # {'module_g': <magda.module.results.ResultSet>}\n"))))}qt.isMDXComponent=!0},6010:function(e,t,n){function l(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=l(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=l(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})}}]);